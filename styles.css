/* Bootstrap-first: keep overrides minimal and targeted */

.lk-body {
  background:
    radial-gradient(1200px 700px at 10% 0%, rgba(13,110,253,.18), transparent 55%),
    radial-gradient(900px 600px at 90% 0%, rgba(32,201,151,.14), transparent 55%),
    linear-gradient(180deg, var(--bs-body-bg), var(--bs-body-bg));
}

.lk-pill {
  font-weight: 600;
  padding: .5rem .6rem;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .4rem .75rem;
  border-radius: 999px;
  border: 1px solid var(--bs-border-color);
  background: color-mix(in oklab, var(--bs-tertiary-bg) 70%, transparent);
  font-weight: 700;
  letter-spacing: .01em;
  box-shadow: 0 .25rem .75rem rgba(0,0,0,.04);
}

.stat-pill {
  background: color-mix(in oklab, var(--bs-primary-bg-subtle) 55%, transparent);
  border-color: color-mix(in oklab, var(--bs-primary-border-subtle) 60%, transparent);
}

.stat-summary {
  display: flex;
  flex-wrap: wrap;
  gap: .35rem;
  margin-top: .35rem;
}

/* JS-rendered editor cards should have consistent spacing */
.lk-editor > .card,
.lk-editor > div.card {
  margin-bottom: .75rem;
}

/* Log area */
.lk-log {
  height: 520px;
  overflow: auto;
  white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  line-height: 1.35;
  padding: .75rem;
  border: 1px solid var(--bs-border-color);
  border-radius: .75rem;
  background: var(--bs-tertiary-bg);
}

/* Textarea in import modal */
.lk-textarea {
  min-height: 220px;
  resize: vertical;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
}

.lk-hint {
  padding: .75rem;
  border-radius: .75rem;
  border: 1px dashed var(--bs-border-color);
  background: var(--bs-tertiary-bg);
}

/* Smaller pills */
.nav-pills-sm .nav-link {
  padding: .35rem .6rem;
  font-size: .875rem;
}

/* Slightly sharper cards */
.card { border-radius: 1rem; }
.card-header { border-top-left-radius: 1rem !important; border-top-right-radius: 1rem !important; }

/* Mobile tweaks */
@media (max-width: 575.98px) {
  .lk-log { height: 360px; }
}

/* -----------------------------
   Party management: portrait rail + sheet
-------------------------------- */

.lk-party-editor {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.lk-party-shell {
  display: grid;
  grid-template-columns: minmax(220px, 260px) 1fr;
  gap: 1rem;
  align-items: start;
}

.lk-party-resources {
  display: flex;
  align-items: stretch;
  border: 1px solid var(--lk-border);
  border-radius: 1rem;
  background: var(--bs-body-bg);
  box-shadow: var(--lk-shadow-sm);
  padding: 1rem;
}

.lk-resource-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  border: 1px dashed var(--bs-border-color);
  border-radius: .9rem;
  padding: 1rem;
  flex: 1;
  background: color-mix(in oklab, var(--bs-body-bg) 70%, var(--bs-tertiary-bg) 30%);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
}

.lk-resource-icon {
  width: 48px;
  height: 48px;
  border-radius: .85rem;
  display: grid;
  place-items: center;
  background: color-mix(in oklab, var(--bs-warning-bg-subtle) 60%, transparent);
  border: 1px solid color-mix(in oklab, var(--bs-warning-border-subtle) 60%, transparent);
  font-size: 1.4rem;
  box-shadow: 0 .35rem .85rem rgba(0,0,0,.06);
}

.lk-portrait-rail {
  display: flex;
  flex-direction: column;
  gap: .75rem;
  padding: .25rem;
  background: color-mix(in oklab, var(--bs-tertiary-bg) 70%, transparent);
  border: 1px solid var(--bs-border-color);
  border-radius: 1rem;
}

.lk-portrait-tab {
  display: grid;
  grid-template-columns: 64px 1fr;
  align-items: center;
  gap: .65rem;
  width: 100%;
  padding: .65rem;
  background: var(--bs-body-bg);
  border: 1px solid var(--bs-border-color);
  border-radius: .85rem;
  box-shadow: var(--lk-shadow-sm);
  transition: border-color .15s ease, background-color .15s ease, transform .15s ease;
}

.lk-portrait-tab:hover { transform: translateY(-1px); }
.lk-portrait-tab.is-active { border-color: var(--bs-primary-border-subtle); box-shadow: 0 .45rem 1.2rem rgba(0,0,0,.08); }
.lk-portrait-tab.is-active .lk-portrait-name { color: var(--bs-primary); }

.lk-portrait-thumb {
  width: 64px;
  height: 64px;
  border-radius: .85rem;
  object-fit: cover;
}

.lk-portrait-name { font-weight: 700; margin: 0; }
.lk-portrait-meta { color: var(--bs-secondary-color); font-size: .9rem; }

.lk-party-sheet {
  border: 1px solid var(--bs-border-color);
  border-radius: 1rem;
  box-shadow: 0 .65rem 1.6rem rgba(0,0,0,.06);
  background: var(--bs-body-bg);
}

.lk-sheet__header { padding: 1.25rem 1.25rem 0 1.25rem; }
.lk-sheet__body { padding: 1.25rem; display: grid; gap: 1.25rem; }

.lk-sheet__cta { display: flex; flex-wrap: wrap; gap: .5rem; justify-content: flex-end; }

.lk-sheet__grid {
  display: grid;
  gap: 1.2rem;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

.lk-section {
  padding: 1rem;
  border: 1px dashed color-mix(in oklab, var(--bs-border-color) 60%, transparent);
  border-radius: .9rem;
  background: color-mix(in oklab, var(--bs-tertiary-bg) 60%, transparent);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.4);
}

.lk-section-heading { display: flex; align-items: center; justify-content: space-between; gap: .75rem; margin-bottom: .65rem; }
.lk-section-title { margin: 0; font-size: .95rem; letter-spacing: .02em; text-transform: uppercase; color: var(--bs-secondary-color); }

.equipment-stack { display: flex; flex-direction: column; gap: .75rem; }
.equip-row { border: 1px solid var(--bs-border-color); border-radius: .9rem; padding: .75rem; background: var(--bs-body-bg); box-shadow: var(--lk-shadow-sm); }
.equip-help { margin-top: .35rem; font-size: .9rem; color: var(--bs-secondary-color); }
.equipment-meta { margin-top: .35rem; }

.lk-notes { width: 100%; min-height: 140px; }

.spell-card {
  border: 1px solid var(--bs-border-color);
  border-radius: .9rem;
  padding: .85rem;
  background: color-mix(in oklab, var(--bs-body-bg) 80%, var(--bs-tertiary-bg) 20%);
  display: flex;
  flex-direction: column;
  gap: .75rem;
}
.spell-body { display: flex; flex-direction: column; gap: .75rem; margin: 0; }
.spell-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: .5rem; align-items: center; }

.lk-empty-sheet { border: 1px dashed var(--bs-border-color); border-radius: 1rem; padding: 1.5rem; text-align: center; color: var(--bs-secondary-color); }

@media (max-width: 991.98px) {
  .lk-party-shell { grid-template-columns: 1fr; }
  .lk-portrait-rail { flex-direction: row; flex-wrap: wrap; }
  .lk-portrait-tab { width: calc(50% - .5rem); }
}

@media (max-width: 575.98px) {
  .lk-portrait-tab { width: 100%; }
}

/* Dialog fallback styling (native <dialog>) */
.lk-dialog {
  position: fixed;
  border: none;
  border-radius: 1rem;
  padding: 0;
  box-shadow: 0 1.5rem 3rem rgba(0,0,0,.25);
  width: min(720px, 92vw);
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%);
  background: var(--bs-body-bg);
  color: var(--bs-body-color);
  z-index: 1080;
}

.lk-dialog::backdrop {
  background: rgba(15, 23, 42, .55);
}
