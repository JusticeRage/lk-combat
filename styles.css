/* Bootstrap-first: keep overrides minimal and targeted */

.lk-body {
  background:
    radial-gradient(1200px 700px at 10% 0%, rgba(13,110,253,.18), transparent 55%),
    radial-gradient(900px 600px at 90% 0%, rgba(32,201,151,.14), transparent 55%),
    linear-gradient(180deg, var(--bs-body-bg), var(--bs-body-bg));
}

.lk-pill {
  font-weight: 600;
  padding: .5rem .6rem;
}

.pill {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .4rem .75rem;
  border-radius: 999px;
  border: 1px solid var(--bs-border-color);
  background: color-mix(in oklab, var(--bs-tertiary-bg) 70%, transparent);
  font-weight: 700;
  letter-spacing: .01em;
  box-shadow: 0 .25rem .75rem rgba(0,0,0,.04);
}

.stat-pill {
  background: color-mix(in oklab, var(--bs-primary-bg-subtle) 55%, transparent);
  border-color: color-mix(in oklab, var(--bs-primary-border-subtle) 60%, transparent);
}

.stat-summary {
  display: flex;
  flex-wrap: wrap;
  gap: .35rem;
  margin-top: .35rem;
}

/* JS-rendered editor cards should have consistent spacing */
.lk-editor > .card,
.lk-editor > div.card {
  margin-bottom: .75rem;
}

/* Log area */
.lk-log {
  height: 520px;
  overflow: auto;
  white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
  line-height: 1.35;
  padding: .75rem;
  border: 1px solid var(--bs-border-color);
  border-radius: .75rem;
  background: var(--bs-tertiary-bg);
}

/* Textarea in import modal */
.lk-textarea {
  min-height: 220px;
  resize: vertical;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  font-size: 12px;
}

.lk-hint {
  padding: .75rem;
  border-radius: .75rem;
  border: 1px dashed var(--bs-border-color);
  background: var(--bs-tertiary-bg);
}

/* Smaller pills */
.nav-pills-sm .nav-link {
  padding: .35rem .6rem;
  font-size: .875rem;
}

/* Slightly sharper cards */
.card { border-radius: 1rem; }
.card-header { border-top-left-radius: 1rem !important; border-top-right-radius: 1rem !important; }

/* Mobile tweaks */
@media (max-width: 575.98px) {
  .lk-log { height: 360px; }
}

/* -----------------------------
   Party management: card grid
-------------------------------- */

.lk-party-grid{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 1rem;
  align-items: start;
}

/* Treat each direct child as a "character card" */
#partyEditor.lk-party-grid > *{
  border: 1px solid var(--lk-border);
  border-radius: var(--lk-radius);
  background: var(--bs-body-bg);
  box-shadow: var(--lk-shadow-sm);
  overflow: clip;
  padding: 1rem;
}

.lk-party-resources {
  grid-column: 1 / -1;
  display: flex;
  align-items: stretch;
  border: 1px solid var(--lk-border);
  border-radius: var(--lk-radius);
  background: var(--bs-body-bg);
  box-shadow: var(--lk-shadow-sm);
  padding: 1rem;
}

.lk-resource-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  width: 100%;
}

.lk-resource-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  border-radius: .9rem;
  background: color-mix(in oklab, var(--bs-warning-bg-subtle) 85%, transparent);
  border: 1px solid color-mix(in oklab, var(--bs-warning-border-subtle) 60%, transparent);
  font-size: 1.4rem;
  box-shadow: 0 .35rem .85rem rgba(0,0,0,.06);
}

.hero-avatar {
  border-radius: .85rem;
}

.hero-heading {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.party-card {
  border: 2px solid var(--bs-border-color);
  border-radius: 1rem;
  box-shadow: 0 .65rem 1.6rem rgba(0,0,0,.06);
}

.party-card .panel-body {
  padding: 1rem;
}

.hero-meta {
  flex: 1;
  min-width: 0;
}

.hero-name {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .45rem .75rem;
  border-radius: .75rem;
  border: 1px dashed var(--bs-border-color);
  background: color-mix(in oklab, var(--bs-secondary-bg-subtle) 55%, transparent);
  font-weight: 700;
  letter-spacing: .01em;
  max-width: 100%;
  word-break: break-word;
}

.hero-meta__row {
  min-height: 48px;
}

/* Headings inside a character card */
#partyEditor.lk-party-grid > * :is(h1,h2,h3,h4,h5){
  margin: 0 0 .75rem 0;
  line-height: 1.2;
}

/* Reduce random spacing patterns from legacy markup */
#partyEditor.lk-party-grid > * :is(.row, .form-group, .input-group, .btn-group){
  margin-top: 0;
}

/* Normalize grid gutters if JS uses .row/.col-* patterns */
#partyEditor.lk-party-grid .row{
  --bs-gutter-x: .75rem;
  --bs-gutter-y: .75rem;
}

/* Make labels look consistent and “sheet-like” */
#partyEditor.lk-party-grid label{
  font-size: .75rem;
  letter-spacing: .02em;
  text-transform: uppercase;
  color: var(--bs-secondary-color);
  margin-bottom: .25rem;
}

/* Inputs/selects: consistent sizing */
#partyEditor.lk-party-grid :is(input[type="text"], input[type="number"], select, textarea){
  border-radius: .7rem;
}

/* “Section” styling for common block containers (stats/inventory/etc.) */
#partyEditor.lk-party-grid :is(
  .stats, .statblock, .character-stats,
  .inventory, .inv, .equipment,
  [class*="stats"], [class*="inventory"],
  [id*="stats"], [id*="inventory"]
){
  margin-top: .85rem;
  padding-top: .85rem;
  border-top: 1px dashed color-mix(in oklab, var(--bs-border-color) 60%, transparent);
}

/* Inventory buttons: flow nicely instead of looking scattered */
#partyEditor.lk-party-grid :is(
  .inventory, .inv, .equipment,
  [class*="inventory"], [id*="inventory"]
){
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  align-items: center;
}

/* Any obvious "button rows" align cleanly */
#partyEditor.lk-party-grid .text-right,
#partyEditor.lk-party-grid .actions,
#partyEditor.lk-party-grid [class*="actions"],
#partyEditor.lk-party-grid [class*="controls"]{
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  justify-content: flex-end;
  align-items: center;
}

/* Small buttons look more intentional */
#partyEditor.lk-party-grid .btn{
  border-radius: .8rem;
}

/* If JS outputs tables inside a character card, keep them compact */
#partyEditor.lk-party-grid table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid var(--lk-border);
  border-radius: var(--lk-radius-sm);
  overflow: hidden;
  margin-top: .75rem;
}
#partyEditor.lk-party-grid th,
#partyEditor.lk-party-grid td{
  padding: .45rem .55rem;
  border-bottom: 1px solid var(--lk-border);
  vertical-align: middle;
}
#partyEditor.lk-party-grid tr:last-child td{ border-bottom: none; }

.spell-card {
  margin-top: .75rem;
  padding: .75rem 1rem;
  border: 1px solid var(--lk-border);
  border-radius: var(--lk-radius);
  background: var(--bs-tertiary-bg);
}

.spell-card summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: .5rem;
  cursor: pointer;
  font-weight: 700;
  letter-spacing: .01em;
  list-style: none;
}

.spell-card summary::-webkit-details-marker { display: none; }

.spell-body {
  margin-top: .75rem;
  display: flex;
  flex-direction: column;
  gap: .75rem;
}

.spell-row {
  display: flex;
  gap: .75rem;
  flex-wrap: wrap;
}

.spell-row label { flex: 1 1 220px; }

/* Dialog fallback styling (native <dialog>) */
.lk-dialog {
  position: fixed;
  border: none;
  border-radius: 1rem;
  padding: 0;
  box-shadow: 0 1.5rem 3rem rgba(0,0,0,.25);
  width: min(720px, 92vw);
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%);
  background: var(--bs-body-bg);
  color: var(--bs-body-color);
  z-index: 1080;
}

.lk-dialog::backdrop {
  background: rgba(15, 23, 42, .55);
}
